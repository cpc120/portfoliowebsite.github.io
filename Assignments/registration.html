<!DOCTYPE html>
<html lang="en-US">
  <head>
    <title>Invitation Page</title>
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <script>
      function myFunction() {
        alert("The form was submitted");
      }
      //Validation Logic Definition
      //including validateMe() function
      // this was to default the user's cursor to the first erroneous input field in the event that there is an input error
      document.querySelectorAll("form").forEach(function ($form) {
        $form.addEventListener("submit", validateMe, false);
        $form.setAttribute("nonvalidate", "");
      });
      function validateMe(e) {
        var $form = e.target,
          i = 0,
          field_count = $form.elements.length,
          $first_error = false;

        for (i; i < field_count; i++) {
          var $field = $form.elements[i],
            valid = isValid($field);
          if (!$first_error && !valid) {
            $first_error = $field;
          }
        }

        if ($first_error) {
          e.preventDefault();
          $first_error.focus();
        }
      }
      function submitForm() {
        // Get form input values
        var firstName = document.getElementById('firstName').value;
        var lastName = document.getElementById('lastName').value;
        var email = document.getElementById('email').value;
        var username = document.getElementById('username').value;
        var phonenumber = document.getElementById('phonenumber').value;

        // Set cookies with the input values
        document.cookie = "firstName=" + encodeURIComponent(firstName);
        document.cookie = "lastName=" + encodeURIComponent(lastName);
        document.cookie = "email=" + encodeURIComponent(email);
        document.cookie = "username=" + encodeURIComponent(username);
        document.cookie = "phonenumber=" + encodeURIComponent(phonenumber);

        // Redirect to confirm.html
        window.location = "confirm.html";

        if (validationfails) {
          return false;
        } else {
          document.form.submit();
          return true;
        }
      }
    </script>
  </head>

  <body>
    <header>
      <div class="top">
        <a class="logo" href="index.html"
          >CapellaVolunteers<span class="dotcom">.org</span></a
        >
      </div>
      <nav>
        <ul class="topnav">
          <li><a href="index.html">Home</a></li>
          <li><a href="invitation.html">Invitation</a></li>
          <li><a href="volunteer.html">Volunteers</a></li>
          <li><a href="gallery.html">Gallery</a></li>
          <li><a href="registration.html" class="active">Registration</a></li>
        </ul>
      </nav>
    </header>
    <section id="pageForm">
      <div id="my_form">
        <! attribute added to the form tag>
        <form action="#" onsubmit="event.preventDefault(); submitForm;">
          <! each section follows the same format from here by using the pattern attribute for the user to input data>
          <! the title attribute was used to specificy data required in each input field>
          <! error messages are customized to their assigned input field using the following attributes: required, aria-required, data-error-required, aria-errormessage, and aria-invalid>
          <! this was to default the user's cursor to the first erroneous input field in the event that there is an input error>
          <label for="username">Username:</label>
          <input
            id="username"
            type="text"
            name="username"
            placeholder="Enter your Username"
            pattern="[a-zA-Z][a-zA-Z0-9-_.]{1,10}"
            title="Must be 1 - 10 characters and only contain numbers and letters (inclusive)"
            required
            aria-required="true"
            data-error-required="Please enter your Username"
            aria-errormessage="name-validation-error"
            aria-invalid="true"
          />

          <label for="Password">Password: </label>
          <input
            id="password"
            type="password"
            name="password"
            placeholder="Enter your Password"
            pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
            title="Must be a minimum of 8 characters"
            required
            aria-required="true"
            data-error-required="Please enter your Password"
            aria-errormessage="name-validation-error"
            aria-invalid="true"
          />

          <label for="passwordVerify">Verify your Password: </label>
          <input
            id="passwordV"
            type="password"
            name="passwordVerify"
            placeholder="Enter in your Password again"
            pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
            title="Must match password"
            required
            aria-required="true"
            data-error-required="Please enter you Password again"
            aria-errormessage="name-validation-error"
            aria-invalid="true"
          />

          <label for="firstName">First Name: </label>
          <input
            id="firstName"
            type="text"
            name="firstName"
            placeholder="Enter your First Name"
            required
            aria-required="true"
            data-error-required="Please enter your first name"
            aria-errormessage="name-validation-error"
            aria-invalid="true"
          />

          <label for="hostName">Last Name: </label>
          <input
            id="lastName"
            type="text"
            name="lastName"
            placeholder="Enter your Last Name"
            required
            aria-required="true"
            data-error-required="Please enter your last name"
            aria-errormessage="name-validation-error"
            aria-invalid="true"
          />

          <label for="email">Email: </label>
          <input
            id="email"
            type="email"
            name="email"
            placeholder="Enter your Email Address"
            title="Uses xxx@xxx.xxx format"
            required
            aria-required="true"
            data-error-required="Please enter your email address"
            aria-errormessage="name-validation-error"
            aria-invalid="true"
          />
          <label for="phonenumber">Phone Number </label>
          <input
            id="phonenumber"
            type="tel"
            name="phonenumber"
            placeholder="Enter your Phone Number"
            pattern="^\d{3}-\d{3}-\d{4}$"
            title="Uses xxx-xxx-xxxx format"
            required
            aria-required="true"
            data-error-required="Please enter your phone number"
            aria-errormessage="name-validation-error"
            aria-invalid="true"
          />
          <label for="signUpNewsletter">Sign up for newsletter: </label>
          <input type="radio" name="signUpNewsletter" value="Yes" checked /> Yes
          <input type="radio" name="signUpNewsletter" value="No" /> No
          <a href="confirm.html" target="_blank">
            <input type="button" value="Submit" />
          </a>
        </form>
      </div>
    </section>
    <footer>This events site is for IT3515 tasks.</footer>
  </body>
</html>
